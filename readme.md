# 微信小程序性能优化

## 微信小程序官方推荐的优化策略

-   从启动性能方面
-   从渲染性能方面

## 1、启动性能优化

小程序在启动过程会分以下几步

-   1、准备运行的环境；这一步是微信内部处理，优化无法从这里下手
-   2、下载、注入、执行小程序代码包
-   3、渲染小程序首页

总结：由于第一步为微信内部处理，所以优化启动性能一般在第二和第三步

### 1-1、控制代码包大小

#### 1-1-1、图片使用 cdn

一般项目中图片等静态文件是影响体积的主要因素, 而小程序支持的体积不能超过 2M, 因此，对于静态资源，需要用 cdn 链接的形式。

#### 1-1-2、清除项目中没用的文件

在开发过程，遇到项目改版，肯定会有一些没用的废弃资源，这些要清理掉，以免影响包的体积。

#### 1-1-3、分包

分包的意义: 将小程序不常用或者首次加载不需要用到的页面放在多个分包里，主包值保留核心页面。这样子，启动时只加载主包，分包会在用到的时候按需下载，从而优化启动时下包的时间。

![分包](/imgs/img1.png)
